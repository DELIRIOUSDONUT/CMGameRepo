{"version":3,"sources":["file:///Users/admin/Documents/GitHub/CMGameRepo/assets/Scripts/CardController.ts"],"names":["_decorator","Component","instantiate","Prefab","ccclass","property","CardController","type","tooltip","Number","ScoreEval","onLoad","i","NumCards","childCard","CardPrefab","node","addChild","cardScript","getComponent","init","widget","target","start","update","deltaTime","console","log","getScore","testGetChildren","children","forEach","childNode","name","CardType","FlippedUp"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,W,OAAAA,W;AAAmBC,MAAAA,M,OAAAA,M;;;;;;;;;OAG7C;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBL,U;;gCAGjBM,c,WADZF,OAAO,CAAC,gBAAD,C,UAEHC,QAAQ,CAAC;AAACE,QAAAA,IAAI,EAAEJ,MAAP;AAAeK,QAAAA,OAAO,EAAE;AAAxB,OAAD,C,UAGRH,QAAQ,CAAC;AAACE,QAAAA,IAAI,EAAEE,MAAP;AAAeD,QAAAA,OAAO,EAAE;AAAxB,OAAD,C,2BALb,MACaF,cADb,SACoCL,SADpC,CAC8C;AAAA;AAAA;;AAAA;;AAAA;;AAAA,eAO1CS,SAP0C;AAAA;;AAQhCC,QAAAA,MAAM,GAAS;AACrB,eAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKC,QAAzB,EAAmCD,CAAC,EAApC,EAAuC;AACnC,kBAAME,SAAS,GAAGZ,WAAW,CAAC,KAAKa,UAAN,CAA7B;AACA,iBAAKC,IAAL,CAAUC,QAAV,CAAmBH,SAAnB;AACA,gBAAII,UAAuB,GACnBJ,SAAS,CAACK,YAAV,CAAuB,YAAvB,CADR;AAGAD,YAAAA,UAAU,CAACE,IAAX,CAAgB,KAAhB,EAAuB,SAAvB,EANmC,CAOnC;;AACA,gBAAIC,MAAwB,GACpBP,SAAS,CAACK,YAAV,CAAuB,WAAvB,CADR;AAEAE,YAAAA,MAAM,CAACC,MAAP,GAAgB,KAAKN,IAArB;AACH,WAZoB,CAcrB;;;AACA,eAAKN,SAAL,GAAiB,KAAKM,IAAL,CAAUG,YAAV,CAAuB,gBAAvB,CAAjB;AAIH;;AACDI,QAAAA,KAAK,GAAG,CACJ;AACH;;AAEDC,QAAAA,MAAM,CAACC,SAAD,EAAoB;AACtB;AACAC,UAAAA,OAAO,CAACC,GAAR,CAAY,KAAKjB,SAAL,CAAekB,QAAf,CAAwB,SAAxB,EAAmC,SAAnC,CAAZ;AACAF,UAAAA,OAAO,CAACC,GAAR,CAAY,KAAKjB,SAAL,CAAekB,QAAf,CAAwB,QAAxB,EAAkC,QAAlC,CAAZ;AACAF,UAAAA,OAAO,CAACC,GAAR,CAAY,KAAKjB,SAAL,CAAekB,QAAf,CAAwB,UAAxB,EAAoC,kBAApC,CAAZ;AACH;;AAEDC,QAAAA,eAAe,GAAE;AACb,eAAKb,IAAL,CAAUc,QAAV,CAAmBC,OAAnB,CAA2BC,SAAS,IAAG;AACnCN,YAAAA,OAAO,CAACC,GAAR,CAAYK,SAAS,CAACC,IAAtB;AACA,gBAAIf,UAAuB,GACfc,SAAS,CAACb,YAAV,CAAuB,YAAvB,CADZ;;AAEA,gBAAGD,UAAH,EAAc;AACVQ,cAAAA,OAAO,CAACC,GAAR,CAAYT,UAAU,CAACgB,QAAvB,EAAiChB,UAAU,CAACiB,SAA5C;AACH;AAEJ,WARD;AASH;;AAjDyC,O","sourcesContent":["import { _decorator, Component, instantiate, Node, Prefab, WidgetComponent } from 'cc';\nimport { CardScript } from './CardScript';\nimport { ScoreEvaluator } from './ScoreEvaluator';\nconst { ccclass, property } = _decorator;\n\n@ccclass('CardController')\nexport class CardController extends Component {\n    @property({type: Prefab, tooltip: \"Drag card prefab here\"})\n    CardPrefab : Prefab;\n\n    @property({type: Number, tooltip: \"Number of cards\"})\n    NumCards : number;\n\n    ScoreEval : ScoreEvaluator\n    protected onLoad(): void {\n        for (let i = 0; i < this.NumCards; i++){\n            const childCard = instantiate(this.CardPrefab);\n            this.node.addChild(childCard);\n            let cardScript : CardScript = \n                    childCard.getComponent(\"CardScript\") as CardScript;\n            \n            cardScript.init(false, \"Testing\");\n            // For layout adjustments\n            let widget : WidgetComponent = \n                    childCard.getComponent(\"cc.Widget\") as WidgetComponent;\n            widget.target = this.node;\n        }\n\n        // Get the evaluator script\n        this.ScoreEval = this.node.getComponent(\"ScoreEvaluator\") as ScoreEvaluator;\n\n        \n\n    }\n    start() {\n        //this.testGetChildren();\n    }\n\n    update(deltaTime: number) {\n        // test score evaluator: should return 0, 100 and -1 sequentially\n        console.log(this.ScoreEval.getScore(\"testing\", \"testing\"));\n        console.log(this.ScoreEval.getScore(\"scored\", \"scored\"));\n        console.log(this.ScoreEval.getScore(\"mismatch\", \"another_mismatch\"));\n    }\n\n    testGetChildren(){\n        this.node.children.forEach(childNode=> {\n            console.log(childNode.name);\n            let cardScript : CardScript = \n                        childNode.getComponent(\"CardScript\") as CardScript;\n            if(cardScript){\n                console.log(cardScript.CardType, cardScript.FlippedUp);\n            }\n            \n        });\n    }\n}\n\n"]}