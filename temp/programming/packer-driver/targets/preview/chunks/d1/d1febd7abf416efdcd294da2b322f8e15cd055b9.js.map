{"version":3,"sources":["file:///Users/admin/Documents/GitHub/CMGameRepo/assets/Scripts/CardScript.ts"],"names":["_decorator","Component","CardSelectEvent","ccclass","property","CardScript","FlippedUp","CardType","CardID","CardSprite","BackSprite","SpriteFrame","start","update","deltaTime","setCardType","cardType","console","log","label","node","getComponentInChildren","string","setFlipStatus","flippedUp","spriteFrame","init","cardID","getComponent","setSprite","cardSprite","backSprite","onCardSelected","dispatchEvent","disable","enabled"],"mappings":";;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;;AAEZC,MAAAA,e,iBAAAA,e;;;;;;;;;OADH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBJ,U;;4BAIjBK,U,WADZF,OAAO,CAAC,YAAD,C,gBAAR,MACaE,UADb,SACgCJ,SADhC,CAC0C;AAAA;AAAA;AAAA,eACtCK,SADsC;AAAA,eAEtCC,QAFsC;AAAA,eAGtCC,MAHsC;AAAA,eAItCC,UAJsC;AAAA,eAKtCC,UALsC;AAAA,eAMtCC,WANsC;AAAA;;AAOtCC,QAAAA,KAAK,GAAG,CACP;;AAEDC,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AAEDC,QAAAA,WAAW,CAACC,QAAD,EAAkB;AACzB,eAAKT,QAAL,GAAgBS,QAAhB;AACAC,UAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkC,KAAKX,QAAvC,EAFyB,CAIzB;;AACA,cAAIY,KAAa,GAAG,KAAKC,IAAL,CAAUC,sBAAV,CAAiC,UAAjC,CAApB;AACAF,UAAAA,KAAK,CAACG,MAAN,GAAe,KAAKf,QAApB;AAEH;;AAEDgB,QAAAA,aAAa,CAACC,SAAD,EAAqB;AAC9B,eAAKlB,SAAL,GAAiBkB,SAAjB;AACAP,UAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoB,KAAKV,MAAzB,EAAiC,mBAAjC,EAAsD,KAAKF,SAA3D,EAF8B,CAG9B;;AACA,cAAG,KAAKG,UAAL,IAAmB,IAAnB,IAA2B,KAAKC,UAAL,IAAmB,IAAjD,EAAsD;AAClD,gBAAG,KAAKJ,SAAR,EAAkB;AACd,mBAAKK,WAAL,CAAiBc,WAAjB,GAA+B,KAAKhB,UAApC;AACH,aAFD,MAGI;AACA,mBAAKE,WAAL,CAAiBc,WAAjB,GAA+B,KAAKf,UAApC;AACH;AACJ;AACJ;;AAEDgB,QAAAA,IAAI,CAACF,SAAD,EAAsBR,QAAtB,EAAyCW,MAAzC,EAAyD;AACzDV,UAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AACA,eAAKV,MAAL,GAAcmB,MAAd;AACA,eAAKZ,WAAL,CAAiBC,QAAjB;AACA,eAAKO,aAAL,CAAmBC,SAAnB;AACA,eAAKf,UAAL,GAAkB,IAAlB;AACA,eAAKC,UAAL,GAAkB,IAAlB;AACA,eAAKC,WAAL,GAAmB,KAAKS,IAAL,CAAUQ,YAAV,CAAuB,WAAvB,CAAnB;AACAX,UAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ;AACH;;AAEDW,QAAAA,SAAS,CAACC,UAAD,EAA2BC,UAA3B,EAAoD;AACzD,eAAKtB,UAAL,GAAkBqB,UAAlB;AACA,eAAKpB,UAAL,GAAkBqB,UAAlB;;AACA,cAAG,KAAKzB,SAAR,EAAkB;AACd,iBAAKK,WAAL,CAAiBc,WAAjB,GAA+B,KAAKhB,UAApC;AACH,WAFD,MAGI;AACA,iBAAKE,WAAL,CAAiBc,WAAjB,GAA+B,KAAKf,UAApC;AACH;;AACDO,UAAAA,OAAO,CAACC,GAAR,CAAYY,UAAZ,EAAwBC,UAAxB;AACH,SA3DqC,CA6DtC;;;AACAC,QAAAA,cAAc,GAAE;AACZ;AACA;AACA,eAAKZ,IAAL,CAAUa,aAAV,CAAwB;AAAA;AAAA,kDAAoB,IAApB,CAAxB;AACH;;AAEDC,QAAAA,OAAO,GAAE;AACL;AACA,eAAKd,IAAL,CAAUQ,YAAV,CAAuB,WAAvB,EAAoCO,OAApC,GAA8C,KAA9C;AACA,eAAKf,IAAL,CAAUQ,YAAV,CAAuB,WAAvB,EAAoCO,OAApC,GAA8C,KAA9C;AACH;;AAxEqC,O","sourcesContent":["import { _decorator, Component, Node , Event , Label, Sprite, SpriteFrame} from 'cc';\nconst { ccclass, property } = _decorator;\nimport { CardSelectEvent } from \"./CardSelectEvent\";\n\n@ccclass('CardScript')\nexport class CardScript extends Component {\n    FlippedUp : boolean;\n    CardType : String;\n    CardID : number;\n    CardSprite : SpriteFrame;\n    BackSprite : SpriteFrame;\n    SpriteFrame : Sprite;\n    start() {\n    }\n\n    update(deltaTime: number) {\n        \n    }\n\n    setCardType(cardType: String){\n        this.CardType = cardType;\n        console.log(\"Card type set to: \", this.CardType);\n\n        // For testing\n        let label : Label = this.node.getComponentInChildren(\"cc.Label\") as Label;\n        label.string = this.CardType as string;\n\n    }\n\n    setFlipStatus(flippedUp : boolean){\n        this.FlippedUp = flippedUp;\n        console.log(\"ID: \", this.CardID, \"Card flipped up: \", this.FlippedUp);\n        // Add animation here based on flip status\n        if(this.CardSprite != null && this.BackSprite != null){\n            if(this.FlippedUp){\n                this.SpriteFrame.spriteFrame = this.CardSprite;\n            }\n            else{\n                this.SpriteFrame.spriteFrame = this.BackSprite;\n            }\n        }\n    }\n\n    init(flippedUp : boolean, cardType : String, cardID : number){\n        console.log(\"---INIT---\");\n        this.CardID = cardID;\n        this.setCardType(cardType);\n        this.setFlipStatus(flippedUp);\n        this.CardSprite = null;\n        this.BackSprite = null;\n        this.SpriteFrame = this.node.getComponent(\"cc.Sprite\") as Sprite;\n        console.log(\"---END CARD INIT---\");\n    }\n\n    setSprite(cardSprite : SpriteFrame, backSprite : SpriteFrame){\n        this.CardSprite = cardSprite;\n        this.BackSprite = backSprite;\n        if(this.FlippedUp){\n            this.SpriteFrame.spriteFrame = this.CardSprite;\n        }\n        else{\n            this.SpriteFrame.spriteFrame = this.BackSprite;\n        }\n        console.log(cardSprite, backSprite);\n    }\n\n    // For observer-publisher pattern, when card is selected, emit to card controller\n    onCardSelected(){\n        //console.log(\"Selected, attempt to emit event\");\n        //this.node.emit(\"card-selected\", this);\n        this.node.dispatchEvent(new CardSelectEvent(this));\n    }\n\n    disable(){\n        //this.node.active = false;\n        this.node.getComponent(\"cc.Sprite\").enabled = false;\n        this.node.getComponent(\"cc.Button\").enabled = false;\n    }\n\n}\n\n"]}