{"version":3,"sources":["file:///Users/admin/Documents/GitHub/CMGameRepo/assets/Scripts/CardScript.ts"],"names":["_decorator","Component","CCBoolean","CardSelectEvent","ccclass","property","CardScript","type","tooltip","FlippedUp","CardType","CardID","CardSprite","BackSprite","SpriteFrame","AudioSource","start","update","deltaTime","setCardType","cardType","console","log","ShowCardType","label","node","getComponentInChildren","string","setFlipStatus","flippedUp","playOneShot","clip","spriteFrame","init","cardID","getComponent","setSprite","cardSprite","backSprite","onCardSelected","dispatchEvent","disable","enabled"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node , Event , Label, Sprite, SpriteFrame, AudioSource, CCBoolean } from 'cc';\nconst { ccclass, property } = _decorator;\nimport { CardSelectEvent } from \"./CardSelectEvent\";\n\n@ccclass('CardScript')\nexport class CardScript extends Component {\n    @property({type: CCBoolean, tooltip: \"Show card type for testing?\"})\n    ShowCardType : boolean;\n    FlippedUp : boolean;\n    CardType : String;\n    CardID : number;\n    CardSprite : SpriteFrame;\n    BackSprite : SpriteFrame;\n    SpriteFrame : Sprite;\n    AudioSource : AudioSource;\n    start() {\n    }\n\n    update(deltaTime: number) {\n        \n    }\n\n    setCardType(cardType: String){\n        this.CardType = cardType;\n        console.log(\"Card type set to: \", this.CardType);\n\n        // For testing\n        if(this.ShowCardType){\n            let label : Label = this.node.getComponentInChildren(\"cc.Label\") as Label;\n            label.string = this.CardType as string;\n        }\n        \n\n    }\n\n    setFlipStatus(flippedUp : boolean){\n        this.FlippedUp = flippedUp;\n        console.log(\"ID: \", this.CardID, \"Card flipped up: \", this.FlippedUp);\n        // Add animation here based on flip status\n        if(this.CardSprite != null && this.BackSprite != null){\n            if(this.FlippedUp){\n                this.AudioSource.playOneShot(this.AudioSource.clip);\n                this.SpriteFrame.spriteFrame = this.CardSprite;\n            }\n            else{\n                this.SpriteFrame.spriteFrame = this.BackSprite;\n            }\n        }\n    }\n\n    init(flippedUp : boolean, cardType : String, cardID : number){\n        console.log(\"---INIT---\");\n        this.CardID = cardID;\n        this.setCardType(cardType);\n        this.setFlipStatus(flippedUp);\n        this.CardSprite = null;\n        this.BackSprite = null;\n        this.SpriteFrame = this.node.getComponent(\"cc.Sprite\") as Sprite;\n        this.AudioSource = this.node.getComponent(\"cc.AudioSource\") as AudioSource;\n        console.log(\"---END CARD INIT---\");\n    }\n\n    setSprite(cardSprite : SpriteFrame, backSprite : SpriteFrame){\n        this.CardSprite = cardSprite;\n        this.BackSprite = backSprite;\n        if(this.FlippedUp){\n            this.SpriteFrame.spriteFrame = this.CardSprite;\n        }\n        else{\n            this.SpriteFrame.spriteFrame = this.BackSprite;\n        }\n        console.log(cardSprite, backSprite);\n    }\n\n    // For observer-publisher pattern, when card is selected, emit to card controller\n    onCardSelected(){\n        //console.log(\"Selected, attempt to emit event\");\n        //this.node.emit(\"card-selected\", this);\n        this.node.dispatchEvent(new CardSelectEvent(this));\n    }\n\n    disable(){\n        //this.node.active = false;\n        this.node.getComponent(\"cc.Sprite\").enabled = false;\n        this.node.getComponent(\"cc.Button\").enabled = false;\n    }\n\n}\n\n"]}